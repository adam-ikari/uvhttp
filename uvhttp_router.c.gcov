        -:    0:Source:/home/zhaodi-chen/project/uvhttp/src/uvhttp_router.c
        -:    0:Graph:build/CMakeFiles/uvhttp.dir/src/uvhttp_router.c.gcno
        -:    0:Data:build/CMakeFiles/uvhttp.dir/src/uvhttp_router.c.gcda
        -:    0:Runs:1
        -:    1:#include "uvhttp_router_simple.h"
        -:    2:#include <stdlib.h>
        -:    3:#include <string.h>
        -:    4:#include <stdio.h>
        -:    5:
        1:    6:uvhttp_router_t* uvhttp_router_new(void) {
        1:    7:    uvhttp_router_t* router = malloc(sizeof(uvhttp_router_t));
        1:    8:    memset(router, 0, sizeof(uvhttp_router_t));
        1:    9:    return router;
        -:   10:}
        -:   11:
        1:   12:void uvhttp_router_free(uvhttp_router_t* router) {
        1:   13:    free(router);
        1:   14:}
        -:   15:
        1:   16:int uvhttp_router_add_route(uvhttp_router_t* router, const char* path, uvhttp_request_handler_t handler) {
        1:   17:    if (router->route_count >= MAX_ROUTES) {
    #####:   18:        fprintf(stderr, "Maximum number of routes reached\n");
    #####:   19:        return -1;
        -:   20:    }
        -:   21:    
        1:   22:    uvhttp_route_t* route = &router->routes[router->route_count];
        1:   23:    strncpy(route->path, path, MAX_ROUTE_PATH_LEN - 1);
        1:   24:    route->path[MAX_ROUTE_PATH_LEN - 1] = '\0';
        1:   25:    route->handler = handler;
        -:   26:    
        1:   27:    router->route_count++;
        1:   28:    return 0;
        -:   29:}
        -:   30:
        2:   31:uvhttp_request_handler_t uvhttp_router_find_handler(uvhttp_router_t* router, const char* path) {
        3:   32:    for (size_t i = 0; i < router->route_count; i++) {
        2:   33:        if (strcmp(router->routes[i].path, path) == 0) {
        1:   34:            return router->routes[i].handler;
        -:   35:        }
        -:   36:    }
        1:   37:    return NULL;
        -:   38:}
