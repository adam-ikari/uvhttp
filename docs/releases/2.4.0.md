---
title: v2.4.0 Release
description: Release notes and migration guide for UVHTTP v2.4.0
date: 2026-02-12
version: 2.4.0
previous: 2.3.0
next: 2.5.0
---

# UVHTTP v2.4.0 Release

**Release Date:** 2026-02-12
**Version:** 2.4.0
**Type:** Minor Release

## üìã Overview

UVHTTP v2.4.0 introduces CMake export configuration for easy library integration, along with important CI/CD improvements and bug fixes. This release focuses on improving the developer experience for library users and enhancing build system integration.

## ‚ú® New Features

### CMake Export Configuration

New CMake export configuration that makes it easier to integrate UVHTTP into user projects:

1. **install(EXPORT) Mechanism**
   - Properly exports uvhttp target with namespace
   - Generates uvhttp-targets.cmake file
   - Compatible with find_package() mechanism

2. **Namespace Convention**
   - All targets use `uvhttp::` namespace
   - Clean separation from user targets
   - Better target organization

3. **Dependency Resolution**
   - Automatically finds required dependencies via find_dependency()
   - Supports Libuv, MbedTLS, xxhash
   - Clear error messages when dependencies missing

4. **pkg-config Support**
   - Provides uvhttp.pc.in for traditional package management
   - Compatible with pkg-config tool
   - Simple integration for Makefile-based projects

### Documentation

- Added comprehensive CMake installation guide
- Added export configuration documentation
- Updated all documentation to reflect new features

## üêõ Bug Fixes

### WebSocket Test Conditions

**Problem:** WebSocket tests were incorrectly compiled when only HTTPS was enabled, causing compilation errors.

**Fix:** Updated test conditions to properly require `BUILD_WITH_WEBSOCKET` for WebSocket-specific tests:

```c
// Before (incorrect)
if(${test_name} MATCHES ".*websocket.*") {
    if(NOT BUILD_WITH_HTTPS AND NOT BUILD_WITH_WEBSOCKET) {
        // Skip test
    }
}

// After (correct)
if(${test_name} MATCHES ".*websocket.*") {
    if(NOT BUILD_WITH_WEBSOCKET) {
        // Skip test
    }
}
```

**Affected Tests:**
- `test_websocket_callback.c`
- `test_websocket_e2e.c`
- `test_websocket_integration.c`
- `test_server_simple_api_coverage.cpp`

### Static Files Examples Conditional Compilation

**Problem:** Static files examples were compiled unconditionally, causing failures when `BUILD_WITH_STATIC_FILES=OFF`.

**Fix:** Added conditional compilation check in `examples/CMakeLists.txt`:

```cmake
# Before (incorrect)
add_subdirectory(04_static_files)

# After (correct)
if(BUILD_WITH_STATIC_FILES)
    add_subdirectory(04_static_files)
endif()
```

**Impact:**
- Full + Examples builds now pass
- Only builds examples when features are enabled
- Reduces compilation time for minimal builds

### Coverage Report Generation

**Problem:** Coverage report generation failed with errors when coverage data was missing.

**Fix:** Improved error handling in CI/CD workflow:

```yaml
# Before
- name: Generate coverage report
  run: |
    cd build
    gcov -r .
    lcov --capture --directory . --output-file coverage.info
    lcov --remove coverage.info '/usr/*' --output-file coverage.info

# After
- name: Generate coverage report
  run: |
    cd build
    find . -name "*.gcno" | head -5 || echo "No .gcno files found"
    find . -name "*.gcda" | head -5 || echo "No .gcda files found"
    gcov -r . || true
    lcov --capture --directory . --base-directory ${GITHUB_WORKSPACE} --output-file coverage.info || true
    lcov --remove coverage.info '/usr/*' --output-file coverage.info || true
    lcov --remove coverage.info 'deps/*' --output-file coverage.info || true
    lcov --remove coverage.info 'test/*' --output-file coverage.info || true
```

**Impact:**
- Coverage Mode builds now pass
- Debug + Coverage builds now pass
- Better error messages for debugging

## üîß Improvements

### CI/CD Build Matrix

**Change:** Renamed TLS to HTTPS in CI/CD build matrix names for consistency.

**Before:**
- TLS Only
- WebSocket + TLS
- TLS + mimalloc
- WebSocket + TLS + mimalloc

**After:**
- HTTPS Only
- WebSocket + HTTPS
- HTTPS + mimalloc
- WebSocket + HTTPS + mimalloc

**Reason:** Aligns with `BUILD_WITH_HTTPS` variable name used in CMake.

### CI/CD Error Handling

**Improvements:**
- Better error messages for debugging
- Graceful failure handling for missing data
- Improved test log upload logic
- Better summary generation

## üìä Performance

No performance changes in this release. v2.4.0 maintains the same performance characteristics as v2.3.0.

### CI/CD Build Matrix Validation

**Status:** 15/15 passing ‚úÖ

All build configurations now pass:
- Minimal (no optional features)
- Full Features
- WebSocket Only
- HTTPS Only
- mimalloc Only
- Debug Mode
- Coverage Mode
- WebSocket + HTTPS
- WebSocket + mimalloc
- HTTPS + mimalloc
- WebSocket + HTTPS + mimalloc
- Debug + Coverage
- Minimal + Debug
- Full + Examples

## üì¶ Installation

### Using CMake

```cmake
find_package(uvhttp REQUIRED)
target_link_libraries(your_app uvhttp::uvhttp)
```

### Using pkg-config

```bash
pkg-config --cflags --libs uvhttp
```

### Building from Source

```bash
git clone https://github.com/adam-ikari/uvhttp.git
cd uvhttp
mkdir build && cd build
cmake ..
make -j$(nproc)
sudo make install
```

## üîÑ Migration Guide

### From v2.3.0 to v2.4.0

**No Breaking Changes**

This is a minor release with backward-compatible changes. No migration is required.

### Optional: Use New CMake Export Configuration

If you want to simplify your CMake integration, you can use the new find_package() mechanism:

**Before:**
```cmake
add_subdirectory(path/to/uvhttp)
target_link_libraries(your_app uvhttp)
```

**After:**
```cmake
find_package(uvhttp REQUIRED)
target_link_libraries(your_app uvhttp::uvhttp)
```

**Benefits:**
- Cleaner CMakeLists.txt
- Automatic dependency resolution
- Standard CMake package integration
- Better target namespacing

## üìù Documentation

- **CMake Installation Guide:** [docs/INSTALL_CMAKE.md](https://github.com/adam-ki/uvhttp/blob/main/docs/INSTALL_CMAKE.md)
- **API Reference:** [docs/api/API_REFERENCE.md](https://github.com/adam-ikari/uvhttp/blob/main/docs/api/API_REFERENCE.md)
- **Architecture:** [docs/dev/ARCHITECTURE.md](https://github.com/adam-ikari/uvhttp/blob/main/docs/dev/ARCHITECTURE.md)
- **Developer Guide:** [docs/guide/DEVELOPER_GUIDE.md](https://github.com/adam-ikari/uvhttp/blob/main/docs/guide/DEVELOPER_GUIDE.md)
- **Tutorial:** [docs/guide/TUTORIAL.md](https://github.com/adam-ikari/uvhttp/blob/main/docs/guide/TUTORIAL.md)

## üêõ Issues Closed

- CMake export configuration issues
- WebSocket test compilation errors
- Static files examples compilation errors
- Coverage report generation failures
- CI/CD build matrix naming inconsistency

## ü§ù Contributors

- adam-ikari

## üìÑ License

MIT License

## üîó Links

- **GitHub Release:** [v2.4.0](https://github.com/adam-ikari/uvhttp/releases/tag/v2.4.0)
- **GitHub Repository:** [adam-ikari/uvhttp](https://github.com/adam-ikari/uvhttp)
- **Documentation:** [Full Documentation](https://github.com/adam-ikari/uvhttp/tree/main/docs)
- **Issues:** [GitHub Issues](https://github.com/adam-ikari/uvhttp/issues)
- **Discussions:** [GitHub Discussions](https://github.com/adam-ikari/uvhttp/discussions)

## üìÖ Upcoming Versions

**v2.5.0:** Development branch (next minor version)

## ‚úÖ Checklist

- [x] All tests passing
- [x] CI/CD builds passing
- [x] Documentation updated
- [x] Release notes created
- [x] Git tag created
- [x] GitHub release published
- [x] Version bump committed
- [x] CHANGELOG.md updated