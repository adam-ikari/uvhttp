.TH "include/uvhttp_websocket_native.h" 3 "Fri Jan 23 2026" "Version 2.0.0" "UVHTTP" \" -*- nroff -*-
.ad l
.nh
.SH NAME
include/uvhttp_websocket_native.h
.SH SYNOPSIS
.br
.PP
\fC#include <stddef\&.h>\fP
.br
\fC#include <stdint\&.h>\fP
.br
\fC#include 'uvhttp_tls\&.h'\fP
.br

.SS "Classes"

.in +1c
.ti -1c
.RI "struct \fBuvhttp_ws_frame_header_t\fP"
.br
.ti -1c
.RI "struct \fBuvhttp_ws_frame_t\fP"
.br
.ti -1c
.RI "struct \fBuvhttp_ws_config_t\fP"
.br
.ti -1c
.RI "struct \fBuvhttp_ws_connection\fP"
.br
.in -1c
.SS "Typedefs"

.in +1c
.ti -1c
.RI "typedef int(* \fBuvhttp_ws_on_message_callback\fP) (struct \fBuvhttp_ws_connection\fP *conn, const char *data, size_t len, int opcode)"
.br
.ti -1c
.RI "typedef int(* \fBuvhttp_ws_on_close_callback\fP) (struct \fBuvhttp_ws_connection\fP *conn, int code, const char *reason)"
.br
.ti -1c
.RI "typedef int(* \fBuvhttp_ws_on_error_callback\fP) (struct \fBuvhttp_ws_connection\fP *conn, int error_code, const char *error_msg)"
.br
.ti -1c
.RI "typedef struct \fBuvhttp_ws_connection\fP \fBuvhttp_ws_connection_t\fP"
.br
.in -1c
.SS "Enumerations"

.in +1c
.ti -1c
.RI "enum \fBuvhttp_ws_opcode_t\fP { \fBUVHTTP_WS_OPCODE_CONTINUATION\fP = 0x0, \fBUVHTTP_WS_OPCODE_TEXT\fP = 0x1, \fBUVHTTP_WS_OPCODE_BINARY\fP = 0x2, \fBUVHTTP_WS_OPCODE_CLOSE\fP = 0x8, \fBUVHTTP_WS_OPCODE_PING\fP = 0x9, \fBUVHTTP_WS_OPCODE_PONG\fP = 0xA }"
.br
.ti -1c
.RI "enum \fBuvhttp_ws_state_t\fP { \fBUVHTTP_WS_STATE_CONNECTING\fP = 0, \fBUVHTTP_WS_STATE_OPEN\fP = 1, \fBUVHTTP_WS_STATE_CLOSING\fP = 2, \fBUVHTTP_WS_STATE_CLOSED\fP = 3 }"
.br
.in -1c
.SS "Functions"

.in +1c
.ti -1c
.RI "struct \fBuvhttp_ws_connection\fP * \fBuvhttp_ws_connection_create\fP (int fd, mbedtls_ssl_context *ssl, int is_server)"
.br
.ti -1c
.RI "void \fBuvhttp_ws_connection_free\fP (struct \fBuvhttp_ws_connection\fP *conn)"
.br
.ti -1c
.RI "int \fBuvhttp_ws_handshake_server\fP (struct \fBuvhttp_ws_connection\fP *conn, const char *request, size_t request_len, char *response, size_t *response_len)"
.br
.ti -1c
.RI "int \fBuvhttp_ws_handshake_client\fP (struct \fBuvhttp_ws_connection\fP *conn, const char *host, const char *path, char *request, size_t *request_len)"
.br
.ti -1c
.RI "int \fBuvhttp_ws_verify_handshake_response\fP (struct \fBuvhttp_ws_connection\fP *conn, const char *response, size_t response_len)"
.br
.ti -1c
.RI "int \fBuvhttp_ws_recv_frame\fP (struct \fBuvhttp_ws_connection\fP *conn, \fBuvhttp_ws_frame_t\fP *frame)"
.br
.ti -1c
.RI "int \fBuvhttp_ws_send_frame\fP (struct \fBuvhttp_ws_connection\fP *conn, const uint8_t *data, size_t len, \fBuvhttp_ws_opcode_t\fP opcode)"
.br
.ti -1c
.RI "int \fBuvhttp_ws_send_text\fP (struct \fBuvhttp_ws_connection\fP *conn, const char *text, size_t len)"
.br
.ti -1c
.RI "int \fBuvhttp_ws_send_binary\fP (struct \fBuvhttp_ws_connection\fP *conn, const uint8_t *data, size_t len)"
.br
.ti -1c
.RI "int \fBuvhttp_ws_send_ping\fP (struct \fBuvhttp_ws_connection\fP *conn, const uint8_t *data, size_t len)"
.br
.ti -1c
.RI "int \fBuvhttp_ws_send_pong\fP (struct \fBuvhttp_ws_connection\fP *conn, const uint8_t *data, size_t len)"
.br
.ti -1c
.RI "int \fBuvhttp_ws_close\fP (struct \fBuvhttp_ws_connection\fP *conn, int code, const char *reason)"
.br
.ti -1c
.RI "int \fBuvhttp_ws_process_data\fP (struct \fBuvhttp_ws_connection\fP *conn, const uint8_t *data, size_t len)"
.br
.ti -1c
.RI "void \fBuvhttp_ws_set_callbacks\fP (struct \fBuvhttp_ws_connection\fP *conn, \fBuvhttp_ws_on_message_callback\fP on_message, \fBuvhttp_ws_on_close_callback\fP \fBon_close\fP, \fBuvhttp_ws_on_error_callback\fP on_error)"
.br
.ti -1c
.RI "int \fBuvhttp_ws_parse_frame_header\fP (const uint8_t *data, size_t len, \fBuvhttp_ws_frame_header_t\fP *header, size_t *header_size)"
.br
.ti -1c
.RI "int \fBuvhttp_ws_build_frame\fP (uint8_t *buffer, size_t buffer_size, const uint8_t *payload, size_t payload_len, \fBuvhttp_ws_opcode_t\fP opcode, int mask, int fin)"
.br
.ti -1c
.RI "void \fBuvhttp_ws_apply_mask\fP (uint8_t *data, size_t len, const uint8_t *masking_key)"
.br
.ti -1c
.RI "int \fBuvhttp_ws_generate_accept\fP (const char *key, char *accept, size_t accept_len)"
.br
.ti -1c
.RI "int \fBuvhttp_ws_verify_accept\fP (const char *key, const char *accept)"
.br
.in -1c
.SH "Typedef Documentation"
.PP 
.SS "typedef struct \fBuvhttp_ws_connection\fP \fBuvhttp_ws_connection_t\fP"

.SS "typedef int(* uvhttp_ws_on_close_callback) (struct \fBuvhttp_ws_connection\fP *conn, int code, const char *reason)"

.SS "typedef int(* uvhttp_ws_on_error_callback) (struct \fBuvhttp_ws_connection\fP *conn, int error_code, const char *error_msg)"

.SS "typedef int(* uvhttp_ws_on_message_callback) (struct \fBuvhttp_ws_connection\fP *conn, const char *data, size_t len, int opcode)"

.SH "Enumeration Type Documentation"
.PP 
.SS "enum \fBuvhttp_ws_opcode_t\fP"

.PP
\fBEnumerator\fP
.in +1c
.TP
\fB\fIUVHTTP_WS_OPCODE_CONTINUATION \fP\fP
.TP
\fB\fIUVHTTP_WS_OPCODE_TEXT \fP\fP
.TP
\fB\fIUVHTTP_WS_OPCODE_BINARY \fP\fP
.TP
\fB\fIUVHTTP_WS_OPCODE_CLOSE \fP\fP
.TP
\fB\fIUVHTTP_WS_OPCODE_PING \fP\fP
.TP
\fB\fIUVHTTP_WS_OPCODE_PONG \fP\fP
.SS "enum \fBuvhttp_ws_state_t\fP"

.PP
\fBEnumerator\fP
.in +1c
.TP
\fB\fIUVHTTP_WS_STATE_CONNECTING \fP\fP
.TP
\fB\fIUVHTTP_WS_STATE_OPEN \fP\fP
.TP
\fB\fIUVHTTP_WS_STATE_CLOSING \fP\fP
.TP
\fB\fIUVHTTP_WS_STATE_CLOSED \fP\fP
.SH "Function Documentation"
.PP 
.SS "void uvhttp_ws_apply_mask (uint8_t * data, size_t len, const uint8_t * masking_key)"
应用掩码 
.SS "int uvhttp_ws_build_frame (uint8_t * buffer, size_t buffer_size, const uint8_t * payload, size_t payload_len, \fBuvhttp_ws_opcode_t\fP opcode, int mask, int fin)"
构建帧 
.SS "int uvhttp_ws_close (struct \fBuvhttp_ws_connection\fP * conn, int code, const char * reason)"
关闭连接 
.SS "struct \fBuvhttp_ws_connection\fP* uvhttp_ws_connection_create (int fd, mbedtls_ssl_context * ssl, int is_server)"
创建 WebSocket 连接 
.SS "void uvhttp_ws_connection_free (struct \fBuvhttp_ws_connection\fP * conn)"
释放 WebSocket 连接 
.SS "int uvhttp_ws_generate_accept (const char * key, char * accept, size_t accept_len)"
生成 Sec-WebSocket-Accept 
.SS "int uvhttp_ws_handshake_client (struct \fBuvhttp_ws_connection\fP * conn, const char * host, const char * path, char * request, size_t * request_len)"
执行 WebSocket 握手 (客户端) 
.SS "int uvhttp_ws_handshake_server (struct \fBuvhttp_ws_connection\fP * conn, const char * request, size_t request_len, char * response, size_t * response_len)"
执行 WebSocket 握手 (服务器端) 
.SS "int uvhttp_ws_parse_frame_header (const uint8_t * data, size_t len, \fBuvhttp_ws_frame_header_t\fP * header, size_t * header_size)"
解析帧头 
.SS "int uvhttp_ws_process_data (struct \fBuvhttp_ws_connection\fP * conn, const uint8_t * data, size_t len)"
处理接收到的数据 
.SS "int uvhttp_ws_recv_frame (struct \fBuvhttp_ws_connection\fP * conn, \fBuvhttp_ws_frame_t\fP * frame)"
接收 WebSocket 帧 
.SS "int uvhttp_ws_send_binary (struct \fBuvhttp_ws_connection\fP * conn, const uint8_t * data, size_t len)"
发送二进制消息 
.SS "int uvhttp_ws_send_frame (struct \fBuvhttp_ws_connection\fP * conn, const uint8_t * data, size_t len, \fBuvhttp_ws_opcode_t\fP opcode)"
发送 WebSocket 帧 
.SS "int uvhttp_ws_send_ping (struct \fBuvhttp_ws_connection\fP * conn, const uint8_t * data, size_t len)"
发送 Ping 
.SS "int uvhttp_ws_send_pong (struct \fBuvhttp_ws_connection\fP * conn, const uint8_t * data, size_t len)"
发送 Pong 
.SS "int uvhttp_ws_send_text (struct \fBuvhttp_ws_connection\fP * conn, const char * text, size_t len)"
发送文本消息 
.SS "void uvhttp_ws_set_callbacks (struct \fBuvhttp_ws_connection\fP * conn, \fBuvhttp_ws_on_message_callback\fP on_message, \fBuvhttp_ws_on_close_callback\fP on_close, \fBuvhttp_ws_on_error_callback\fP on_error)"
设置回调函数 
.SS "int uvhttp_ws_verify_accept (const char * key, const char * accept)"
验证 Sec-WebSocket-Accept 
.SS "int uvhttp_ws_verify_handshake_response (struct \fBuvhttp_ws_connection\fP * conn, const char * response, size_t response_len)"
验证握手响应 (客户端) 
.SH "Author"
.PP 
Generated automatically by Doxygen for UVHTTP from the source code\&.
