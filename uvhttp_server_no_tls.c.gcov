        -:    0:Source:/home/zhaodi-chen/project/uvhttp/src/uvhttp_server_no_tls.c
        -:    0:Graph:build/CMakeFiles/uvhttp.dir/src/uvhttp_server_no_tls.c.gcno
        -:    0:Data:build/CMakeFiles/uvhttp.dir/src/uvhttp_server_no_tls.c.gcda
        -:    0:Runs:1
        -:    1:#include "uvhttp_server_simple.h"
        -:    2:#include "uvhttp_request_simple.h"
        -:    3:#include "uvhttp_response_simple.h"
        -:    4:#include "uvhttp_router_simple.h"
        -:    5:#include "uvhttp_connection.h"
        -:    6:#include <stdlib.h>
        -:    7:#include <string.h>
        -:    8:#include <stdio.h>
        -:    9:
        1:   10:struct uvhttp_server* uvhttp_server_new(void* loop) {
        1:   11:    struct uvhttp_server* server = malloc(sizeof(struct uvhttp_server));
        1:   12:    if (!server) {
    #####:   13:        return NULL;
        -:   14:    }
        -:   15:    
        1:   16:    memset(server, 0, sizeof(struct uvhttp_server));
        -:   17:    
        1:   18:    server->loop = loop;
        1:   19:    server->is_listening = 0;
        1:   20:    server->active_connections = 0;
        -:   21:    
        1:   22:    return server;
        -:   23:}
        -:   24:
        1:   25:void uvhttp_server_free(struct uvhttp_server* server) {
        1:   26:    if (server->router) {
    #####:   27:        uvhttp_router_free(server->router);
        -:   28:    }
        1:   29:    free(server);
        1:   30:}
        -:   31:
    #####:   32:int uvhttp_server_listen(struct uvhttp_server* server, const char* host, int port) {
        -:   33:    // 简化版本只设置标记
    #####:   34:    server->is_listening = 1;
    #####:   35:    printf("Server listening on %s:%d\n", host, port);
    #####:   36:    return 0;
        -:   37:}
        -:   38:
        1:   39:void uvhttp_server_set_handler(struct uvhttp_server* server, uvhttp_request_handler_t handler) {
        1:   40:    server->handler = handler;
        1:   41:}
        -:   42:
    #####:   43:void uvhttp_server_stop(struct uvhttp_server* server) {
    #####:   44:    if (server->is_listening) {
    #####:   45:        server->is_listening = 0;
    #####:   46:        printf("Server stopped\n");
        -:   47:    }
    #####:   48:}
